<template>
  <section id="project" class="section project">
    <ul class="project-list">
      <!-- project-item -->
      <li class="project-item">
        <div class="project-title">
          <h2>삼성카드 <br />데이터랩</h2>
          <p>
            헤더 등 전체 레이아웃, 회원 전체 프로세스, BLUE 인덱스 메뉴, Press
            Release 메뉴 구축
          </p>
          <a
            class="button project-button"
            href="https://datalab.samsungcard.com/"
            target="_blank"
          >
            <span>VISIT</span>
            <i class="icon icon-arrow-out"></i>
          </a>
        </div>
        <div class="project-image-wrap">
          <div class="project-image project-image-pc project-image-slide">
            <img
              class="active"
              src="@/assets/images/project/datalab_01.png"
              alt=""
            />
            <img src="@/assets/images/project/datalab_03.png" alt="" />
            <img src="@/assets/images/project/datalab_05.png" alt="" />
          </div>
          <div class="project-image project-image-mobile">
            <img src="@/assets/images/project/datalab_02.png" alt="" />
          </div>
          <div class="project-image project-image-mobile">
            <img src="@/assets/images/project/datalab_04.png" alt="" />
          </div>
        </div>
        <div class="project-desc">
          <p class="project-number">
            <span class="project-number-current"></span> <i>/</i>
            <span class="project-number-total"></span>
          </p>
          <ul class="project-desc-list">
            <li>
              <span>스킬</span>
              <p>HTML, CSS, SASS, jQuery</p>
            </li>
            <li>
              <span>기간</span>
              <p>2024. 01 - 2024. 04</p>
            </li>
            <li>
              <span>참여도</span>
              <p>50%</p>
            </li>
          </ul>
        </div>
      </li>
      <!-- //project-item -->

      <!-- project-item -->
      <li class="project-item">
        <div class="project-title">
          <h2>삼성카드</h2>
          <p>
            매주 미리 내기, 링크 캘린더, 웰컴 미션, SFC 라운지 화면 개선 및
            삼성카드 운영
          </p>
          <a
            class="button project-button"
            href="https://www.samsungcard.com/personal/main/UHPPCO0101M0.jsp"
            target="_blank"
          >
            <span>VISIT</span>
            <i class="icon icon-arrow-out"></i>
          </a>
        </div>
        <div class="project-image-wrap">
          <div class="project-image project-image-mobile">
            <img src="@/assets/images/project/samsungcard_01.png" alt="" />
          </div>
          <div class="project-image project-image-mobile project-image-slide">
            <img
              class="active"
              src="@/assets/images/project/samsungcard_03.png"
              alt=""
            />
            <img src="@/assets/images/project/samsungcard_04.png" alt="" />
          </div>
          <div class="project-image project-image-mobile project-image-slide">
            <img
              class="active"
              src="@/assets/images/project/samsungcard_05.png"
              alt=""
            />
            <img src="@/assets/images/project/samsungcard_06.png" alt="" />
          </div>
          <div class="project-image project-image-mobile">
            <img src="@/assets/images/project/samsungcard_02.png" alt="" />
          </div>
        </div>
        <div class="project-desc">
          <p class="project-number">
            <span class="project-number-current"></span> <i>/</i>
            <span class="project-number-total"></span>
          </p>
          <ul class="project-desc-list">
            <li>
              <span>스킬</span>
              <p>HTML, CSS, SASS, jQuery, Vue</p>
            </li>
            <li>
              <span>기간</span>
              <p>2021. 03 - 2023. 11</p>
            </li>
            <li>
              <span>참여도</span>
              <p>개선 100%, 운영 25%</p>
            </li>
          </ul>
        </div>
      </li>
      <!-- //project-item -->

      <!-- project-item -->
      <li class="project-item">
        <div class="project-title">
          <h2>펫팟</h2>
          <p>쇼핑몰, 커뮤니티 구축 및 퍼블리싱 가이드 문서 작성</p>
          <a
            class="button project-button"
            href="https://www.petpot.co.kr/"
            target="_blank"
          >
            <span>VISIT</span>
            <i class="icon icon-arrow-out"></i>
          </a>
        </div>
        <div class="project-image-wrap">
          <div class="project-image project-image-mobile project-image-slide">
            <img
              class="active"
              src="@/assets/images/project/petpot_01.png"
              alt=""
            />
            <img src="@/assets/images/project/petpot_02.png" alt="" />
            <img src="@/assets/images/project/petpot_03.png" alt="" />
          </div>
          <div class="project-image project-image-mobile project-image-slide">
            <img
              class="active"
              src="@/assets/images/project/petpot_04.png"
              alt=""
            />
            <img src="@/assets/images/project/petpot_05.png" alt="" />
            <img src="@/assets/images/project/petpot_06.png" alt="" />
          </div>
        </div>
        <div class="project-desc">
          <p class="project-number">
            <span class="project-number-current"></span> <i>/</i>
            <span class="project-number-total"></span>
          </p>
          <ul class="project-desc-list">
            <li>
              <span>스킬</span>
              <p>HTML, CSS, jQuery</p>
            </li>
            <li>
              <span>기간</span>
              <p>2020. 09 - 2021. 02</p>
            </li>
            <li>
              <span>참여도</span>
              <p>100%</p>
            </li>
          </ul>
        </div>
      </li>
      <!-- //project-item -->

      <!-- project-item -->
      <li class="project-item">
        <div class="project-title">
          <h2>키디키디</h2>
          <p>쇼핑몰 구축 및 퍼블리싱 가이드 문서 작성</p>
          <a
            class="button project-button"
            href="https://kidikidi.elandmall.co.kr/"
            target="_blank"
          >
            <span>VISIT</span>
            <i class="icon icon-arrow-out"></i>
          </a>
        </div>
        <div class="project-image-wrap">
          <div class="project-image project-image-pc">
            <img src="@/assets/images/project/kidikidi_01.png" alt="" />
          </div>
        </div>
        <div class="project-desc">
          <p class="project-number">
            <span class="project-number-current"></span> <i>/</i>
            <span class="project-number-total"></span>
          </p>
          <ul class="project-desc-list">
            <li>
              <span>스킬</span>
              <p>HTML, CSS, jQuery</p>
            </li>
            <li>
              <span>기간</span>
              <p>2020. 02 - 2020. 08</p>
            </li>
            <li>
              <span>참여도</span>
              <p>50%</p>
            </li>
          </ul>
        </div>
      </li>
      <!-- //project-item -->

      <!-- project-item -->
      <li class="project-item">
        <div class="project-title">
          <h2>NESPDF</h2>
          <p>NESPDF 구축 및 운영</p>
          <a
            class="button project-button"
            href="https://www.nespdf.com/"
            target="_blank"
          >
            <span>VISIT</span>
            <i class="icon icon-arrow-out"></i>
          </a>
        </div>
        <div class="project-image-wrap">
          <div class="project-image project-image-pc">
            <img src="@/assets/images/project/nespdf_01.png" alt="" />
          </div>
        </div>
        <div class="project-desc">
          <p class="project-number">
            <span class="project-number-current"></span> <i>/</i>
            <span class="project-number-total"></span>
          </p>
          <ul class="project-desc-list">
            <li>
              <span>스킬</span>
              <p>HTML, CSS</p>
            </li>
            <li>
              <span>기간</span>
              <p>2017. 12 - 2018. 04</p>
            </li>
            <li>
              <span>참여도</span>
              <p>100%</p>
            </li>
          </ul>
        </div>
      </li>
      <!-- //project-item -->
    </ul>
  </section>
</template>

<script setup>
import { onMounted } from 'vue';

onMounted(() => {
  const projectImageSlides = document.querySelectorAll('.project-image-slide');
  const projectItems = document.querySelectorAll('.project-item');

  projectImageSlides.forEach((slide) => {
    const images = slide.querySelectorAll('img');
    let currentIndex = 0;
    let interval = null;

    const startSlide = () => {
      interval = setInterval(() => {
        images.forEach((img) => img.classList.remove('active'));
        currentIndex =
          currentIndex >= images.length - 1 ? 0 : (currentIndex += 1);
        images[currentIndex].classList.add('active');
      }, 2500);
    };

    const stopSlide = () => clearInterval(interval);

    startSlide();
    slide.addEventListener('mouseenter', stopSlide);
    slide.addEventListener('mouseout', startSlide);
  });

  projectItems.forEach((item, index) => {
    const currentNum = item.querySelector('.project-number-current');
    const totalNum = item.querySelector('.project-number-total');

    currentNum.textContent = `${index + 1}`;
    totalNum.textContent = `${projectItems.length}`;
  });
});
</script>

<style lang="scss" scoped>
.project {
  min-height: 100vh;
  padding: 20rem 10rem 10rem;

  .project-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;

    & + .project-item {
      position: relative;
      margin-top: 10rem;
      padding-top: 10rem;

      &::after {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        display: block;
        width: 100%;
        height: 1px;
        background: $color-light-gray;
      }
    }
  }

  .project-title {
    position: sticky;
    top: 10rem;
    width: 20%;

    h2 {
      font-size: 4vw;
      font-weight: 500;
    }

    p {
      margin-top: 5rem;
      color: $color-gray;
      font-size: 2rem;
      line-height: 1.4;
      word-break: keep-all;
    }
  }

  .project-button {
    margin-top: 5rem;
  }

  .project-image-wrap {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 5rem;
    width: 40%;

    .project-image {
      display: flex;
      gap: 5rem;
      border-radius: 2rem;
      overflow: hidden;

      &-pc {
        width: 100%;

        img {
          max-height: 60rem;
        }
      }

      &-mobile {
        width: calc(50% - 2.5rem);

        img {
          max-height: 80rem;
        }
      }

      &-slide {
        position: relative;
        overflow: hidden;

        img {
          opacity: 0;
          transition: opacity 1s;

          &:not(:first-child) {
            position: absolute;
            left: 0;
            top: 0;
          }

          &.active {
            opacity: 1;
          }
        }
      }
    }

    img {
      width: 100%;
      vertical-align: top;
      object-fit: cover;
      object-position: center top;

      border-radius: 2rem;
      overflow: hidden;
    }
  }

  .project-desc {
    position: sticky;
    top: 10rem;
    width: 20%;
    padding-left: 5%;
  }

  .project-number {
    font-size: 3vw;
    font-weight: 500;

    i {
      color: $color-gray;
      font-weight: 200;
    }
  }

  .project-desc-list {
    margin-top: 5rem;

    li {
      margin-bottom: 2rem;
    }

    span {
      font-size: 1.8rem;
      font-weight: 500;
    }

    p {
      margin-top: 0.5rem;
      color: $color-gray;
      font-size: 1.8rem;
    }
  }

  @include media-small-down {
    padding: 8rem 2rem;

    .project-item {
      flex-direction: column;

      & + .project-item {
        margin-top: 5rem;
        padding-top: 5rem;
      }
    }

    .project-title {
      position: relative;
      top: 0;
      width: 100%;

      h2 {
        font-size: 8rem;
      }
    }

    .project-image-wrap {
      gap: 2rem;
      width: 100%;
      margin-top: 5rem;

      .project-image-pc img {
        max-height: none;
      }

      .project-image-mobile {
        width: calc(50% - 1rem);
      }
    }

    .project-desc {
      position: relative;
      top: 0;
      width: 100%;
      padding: 0;
    }

    .project-number {
      display: none;
    }
  }
}
</style>
